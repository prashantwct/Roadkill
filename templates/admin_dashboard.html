{% extends "base.html" %}
{% block content %}

<h2>Admin Dashboard</h2>

<div class="stats">
  <ul>
    <li><strong>Total Users:</strong> {{ total_users }}</li>
    <li><strong>Pending Approvals:</strong> {{ pending_users }}</li>
    <li><strong>Total Sites:</strong> {{ total_sites }}</li>
    <li><strong>Total Carcasses:</strong> {{ total_carcasses }}</li>
    <li><strong>Total Samples:</strong> {{ total_samples }}</li>
  </ul>
</div>

<hr>

<h3>Quick Actions</h3>
<div class="admin-actions">
  <p><a href="{{ url_for('manage_users') }}">üë• Manage Users</a></p>
  <p><a href="{{ url_for('new_site') }}">‚ûï Add New Site</a></p>
  <p><a href="{{ url_for('new_carcass') }}">üßç Record Carcass</a></p>
  <p><a href="{{ url_for('export_samples') }}">üì¶ Export Samples (CSV)</a></p>
</div>

<hr>

<!-- NEW: Highlights -->
<h3>Recent Carcasses</h3>
{% if recent_carcasses %}
  <ul>
    {% for c in recent_carcasses %}
      <li>
        <strong>{{ c.code }}</strong> ‚Äî
        {{ c.species or 'Unknown' }} at {{ c.site.code }}
        on {{ c.datetime_found.strftime('%Y-%m-%d %H:%M') }}
        <a href="{{ url_for('view_carcass', carcass_id=c.id) }}">View</a>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No carcasses found.</p>
{% endif %}

<hr>

<h3>Recent Samples</h3>
{% if recent_samples %}
  <ul>
    {% for s in recent_samples %}
      <li>
        {{ s.label }}
        (Carcass Code <strong>{{ s.carcass.code }}</strong>)
        <a href="{{ url_for('view_sample', sample_id=s.id) }}">View</a>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No samples found.</p>
{% endif %}

<style>
.stats ul {
  list-style: none;
  padding: 0;
}
.stats li {
  margin: 4px 0;
  font-size: 16px;
}
.admin-actions a {
  display: inline-block;
  margin-right: 10px;
  padding: 6px 10px;
  background: #eef;
  border-radius: 6px;
  text-decoration: none;
}
.admin-actions a:hover {
  background: #cce;
}
</style>

{% endblock %}
