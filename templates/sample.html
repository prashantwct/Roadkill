<!-- force update -->
{% extends "base.html" %}
{% block content %}

<div class="row justify-content-center">
  <div class="col-lg-7 col-md-9">

    <div class="card shadow-sm p-4">

      <h3 class="mb-3">
        <i class="fa-solid fa-vial me-2"></i>
        Sample {{ s.label }}
      </h3>

      <table class="table table-borderless mb-4">
        <tbody>
          <tr>
            <th class="w-25">UUID:</th>
            <td>{{ s.uuid }}</td>
          </tr>

          <tr>
            <th>Type:</th>
            <td>{{ s.sample_type }}</td>
          </tr>

          <tr>
            <th>Collected By:</th>
            <td>
              {{ s.collected_by }}
              <br>
              <small class="text-muted">
                {{ s.collected_at.strftime('%Y-%m-%d %H:%M') }}
              </small>
            </td>
          </tr>

          <tr>
            <th>Storage:</th>
            <td>{{ s.storage }}</td>
          </tr>

          <tr>
            <th>Carcass:</th>
            <td>
              <a href="{{ url_for('view_carcass', carcass_id=s.carcass.id) }}"
                 class="text-decoration-none">
                #{{ s.carcass.id }} â€” Code: <strong>{{ s.carcass.code }}</strong>
              </a>
            </td>
          </tr>
        </tbody>
      </table>

      <h5 class="mt-4">QR Label</h5>
      <div class="text-center">
        <img
          src="{{ url_for('static', filename='labels/' + s.label + '.png') }}"
          width="200"
          class="img-fluid border p-2 rounded"
          alt="QR label"
        >
      </div>

    </div>

  </div>
</div>


    {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <div class="mt-4 pt-3 border-top text-end">
        <div class="d-inline-flex gap-2">
          <a href="{{ url_for('edit_sample', sample_id=s.id) }}" class="btn btn-sm btn-outline-dark"><i class="fa-solid fa-pen"></i> Edit Sample</a>
          <form action="{{ url_for('delete_sample', sample_id=s.id) }}" method="POST" onsubmit="return confirm('Delete this Sample?');">
            <button class="btn btn-sm btn-outline-danger"><i class="fa-solid fa-trash"></i> Delete Sample</button>
          </form>
        </div>
      </div>
    {% endif %}

{% endblock %}
